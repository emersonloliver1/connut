{% extends "base.html" %}

{% block title %}Relatório Detalhado - CONNUT{% endblock %}

{% block content %}
<div class="container mx-auto p-4">
    <div class="bg-white rounded-lg shadow-md p-6 mt-4">
        <h2 class="text-2xl font-bold mb-4">Relatório para {{ relatorio.nome_cliente }}</h2>
        <p class="mb-2">Tipo de Checklist: {{ relatorio.tipo_checklist }}</p>
        <p class="mb-2">Data da Inspeção: {{ relatorio.data_inspecao.strftime('%d/%m/%Y') }}</p>
        <p class="mb-2">Área Observada: {{ relatorio.area_observada }}</p>
        <p class="mb-2">Avaliador: {{ relatorio.avaliador }}</p>
        <p class="mb-4">Porcentagem de Conformidade: {{ relatorio.porcentagem_conformidade }}%</p>
        
        <h3 class="text-xl font-bold mb-2">Respostas do Checklist</h3>
        <ul class="list-disc pl-5 mb-4">
        {% for item in relatorio.respostas %}
            <li>
                <p><strong>{{ item.descricao }}</strong></p>
                <p>Conformidade: {{ item.conformidade }}</p>
                {% if item.observacoes %}
                    <p>Observações: {{ item.observacoes }}</p>
                {% endif %}
            </li>
        {% endfor %}
        </ul>
        
        <h3 class="text-xl font-bold mb-2">Documentos (Total: {{ relatorio.total_documentos }})</h3>
        <ul class="list-disc pl-5">
        {% for documento in relatorio.documentos %}
            <li>{{ documento.nome }} ({{ documento.tipo_arquivo }})</li>
        {% endfor %}
        </ul>
        
        <a href="{{ url_for('relatorios') }}" class="inline-block mt-4 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded transition duration-300">
            Voltar para Seleção de Cliente
        </a>
        
        <a href="{{ url_for('exportar_pdf', cliente_id=relatorio.cliente_id, checklist_id=relatorio.checklist_id) }}" class="inline-block mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition duration-300">
            Exportar para PDF
        </a>
    </div>
</div>
{% endblock %}
