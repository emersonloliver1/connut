<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatório de Checklist - {{ relatorio.nome_cliente }}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            padding: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 20px;
        }
        .header img {
            max-width: 300px; /* Aumentado de 200px para 300px */
            height: auto;
        }
        h1, h2 {
            color: #0056b3;
        }
        .info {
            margin-bottom: 20px;
        }
        .item {
            margin-bottom: 20px;
            padding: 10px;
            border-left: 5px solid #ddd;
            background-color: #f0f0f0; /* Fundo acinzentado para cada item */
        }
        .item.conforme {
            border-left-color: #4CAF50;
        }
        .item.parcial {
            border-left-color: #FFA500;
        }
        .item.inconformidade {
            border-left-color: #FF6347;
        }
        .item.nao-conforme {
            border-left-color: #F44336;
        }
        .item.nao-se-aplica {
            border-left-color: #9E9E9E;
        }
        .conformidade {
            font-weight: bold;
            margin-top: 5px;
        }
        .conformidade-conforme { color: #4CAF50; }
        .conformidade-parcial { color: #FFA500; }
        .conformidade-inconformidade { color: #FF6347; }
        .conformidade-nao-conforme { color: #F44336; }
        .conformidade-nao-se-aplica { color: #9E9E9E; }
        .observacoes {
            font-style: italic;
            margin-top: 5px;
        }
        .anexo img {
            max-width: 300px;
            height: auto;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="header">
        <img src="{{ url_for('static', filename='logo.jpg', _external=True) }}" alt="Connut Logo">
        <h1>Relatório de Checklist - {{ relatorio.nome_cliente }}</h1>
    </div>

    <div class="info">
        <p><strong>Tipo de Checklist:</strong> {{ relatorio.tipo_checklist }}</p>
        <p><strong>Data da Inspeção:</strong> {{ relatorio.data_inspecao.strftime('%d/%m/%Y') }}</p>
        <p><strong>Área Observada:</strong> {{ relatorio.area_observada }}</p>
        <p><strong>Avaliador:</strong> {{ relatorio.avaliador }}</p>
        <p><strong>CRN:</strong> {{ relatorio.crn }}</p>
        <p><strong>Conformidade:</strong> {{ "%.2f"|format(relatorio.porcentagem_conformidade) }}%</p>
    </div>

    <h2>Respostas do Checklist</h2>
    {% for secao, itens in relatorio.respostas_por_secao.items() %}
        <h3>{{ secao }}</h3>
        {% for item in itens %}
        <div class="item {% if item.conformidade == 100 %}conforme
                         {% elif item.conformidade == 50 %}parcial
                         {% elif item.conformidade == 25 %}inconformidade
                         {% elif item.conformidade == 0 %}nao-conforme
                         {% else %}nao-se-aplica
                         {% endif %}">
            <p><strong>Status:</strong> {{ item.descricao }}</p>
            <p class="conformidade 
                {% if item.conformidade == 100 %}conformidade-conforme
                {% elif item.conformidade == 50 %}conformidade-parcial
                {% elif item.conformidade == 25 %}conformidade-inconformidade
                {% elif item.conformidade == 0 %}conformidade-nao-conforme
                {% else %}conformidade-nao-se-aplica
                {% endif %}">
                Conformidade: 
                {% if item.conformidade == 100 %}Conforme (100%)
                {% elif item.conformidade == 50 %}Parcial (50%)
                {% elif item.conformidade == 25 %}Inconformidade (25%)
                {% elif item.conformidade == 0 %}Não Conforme (0%)
                {% else %}Não se aplica
                {% endif %}
            </p>
            {% if item.observacoes %}
            <p class="observacoes">Observações: {{ item.observacoes }}</p>
            {% endif %}
            {% if item.anexo %}
            <div class="anexo">
                <img src="{{ item.anexo }}" alt="Anexo">
            </div>
            {% endif %}
        </div>
        {% endfor %}
    {% endfor %}
</body>
</html>
